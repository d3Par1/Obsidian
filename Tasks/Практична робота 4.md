# –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ 4

**–ö—É—Ä—Å:** –ê–°–ü–ó 2026

## –í–∫–ª–∞–¥–µ–Ω–Ω—è

- üìé –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ 4

## Google Classroom

[–í—ñ–¥–∫—Ä–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è](https://classroom.google.com/u/0/c/ODQyNDY3MjgwMTkz/a/ODQyOTYxOTc5NTQ1/details)

---

## üìÑ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ 4

–ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ 4
–ó–∞–≤–¥–∞–Ω–Ω—è –ó–ê–ì–ê–õ–¨–ù–ï –î–õ–Ø –í–°–Ü–•
–ó–∞–≤–¥–∞–Ω–Ω—è 4.1
–°–∫—ñ–ª—å–∫–∏ –ø–∞–º‚Äô—è—Ç—ñ –º–æ–∂–µ –≤–∏–¥—ñ–ª–∏—Ç–∏ malloc(3) –∑–∞ –æ–¥–∏–Ω –≤–∏–∫–ª–∏–∫?
–ü–∞—Ä–∞–º–µ—Ç—Ä malloc(3) —î —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º —Ç–∏–ø—É –¥–∞–Ω–∏—Ö size_t, —Ç–æ–º—É –ª–æ–≥—ñ—á–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–µ —á–∏—Å–ª–æ, —è–∫–µ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä malloc(3), ‚Äî —Ü–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è size_t –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ (sizeof(size_t)). –£ 64-–±—ñ—Ç–Ω—ñ–π Linux size_t —Å—Ç–∞–Ω–æ–≤–∏—Ç—å 8 –±–∞–π—Ç—ñ–≤, —Ç–æ–±—Ç–æ 8 * 8 = 64 –±—ñ—Ç–∏. –í—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –æ–±—Å—è–≥ –ø–∞–º‚Äô—è—Ç—ñ, —è–∫–∏–π –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–¥—ñ–ª–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –≤–∏–∫–ª–∏–∫ malloc(3), –¥–æ—Ä—ñ–≤–Ω—é—î 2^64. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–¥ –Ω–∞ x86_64 —Ç–∞ x86. –ß–æ–º—É —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –æ–±—Å—è–≥ —Å–∫–ª–∞–¥–∞—î 8 –µ–∫—Å–∞–±–∞–π—Ç, –∞ –Ω–µ 16?
–ó–∞–≤–¥–∞–Ω–Ω—è 4.2
–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ malloc(3) –≤—ñ–¥‚Äô—î–º–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç? –ù–∞–ø–∏—à—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫, —è–∫–∏–π –æ–±—á–∏—Å–ª—é—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–¥—ñ–ª–µ–Ω–∏—Ö –±–∞–π—Ç—ñ–≤ –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é num = xa * xb. –©–æ –±—É–¥–µ, —è–∫—â–æ num –æ–≥–æ–ª–æ—à–µ–Ω–µ —è–∫ —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ –∑—ñ –∑–Ω–∞–∫–æ–º, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–Ω–æ–∂–µ–Ω–Ω—è –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–µ—Ä–µ–ø–æ–≤–Ω–µ–Ω–Ω—è? –Ø–∫ —Å–µ–±–µ –ø–æ–≤–µ–¥–µ malloc(3)? –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –Ω–∞ x86_64 —ñ x86.
–ó–∞–≤–¥–∞–Ω–Ω—è 4.3
–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ malloc(0)? –ù–∞–ø–∏—à—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫, —É —è–∫–æ–º—É malloc(3) –ø–æ–≤–µ—Ä—Ç–∞—î NULL –∞–±–æ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫, —â–æ –Ω–µ —î NULL, —ñ —è–∫–∏–π –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ —É free(). –í—ñ–¥–∫–æ–º–ø—ñ–ª—é–π—Ç–µ —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —á–µ—Ä–µ–∑ ltrace. –ü–æ—è—Å–Ω—ñ—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏.
–ó–∞–≤–¥–∞–Ω–Ω—è 4.4
–ß–∏ —î –ø–æ–º–∏–ª–∫–∏ —É —Ç–∞–∫–æ–º—É –∫–æ–¥—ñ?
void *ptr = NULL;
while (&lt;some-condition-is-true>) {
    if (!ptr)
        ptr = malloc(n);
    [... <–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è 'ptr'> ...]
    free(ptr);
}


–ù–∞–ø–∏—à—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫, —è–∫–∏–π –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø—Ä–æ–±–ª–µ–º—É —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –∫–æ–¥—É.
–ó–∞–≤–¥–∞–Ω–Ω—è 4.5
–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ realloc(3) –Ω–µ –∑–º–æ–∂–µ –≤–∏–¥—ñ–ª–∏—Ç–∏ –ø–∞–º‚Äô—è—Ç—å? –ù–∞–ø–∏—à—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫, —â–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ü–µ–π —Å—Ü–µ–Ω–∞—Ä—ñ–π.
–ó–∞–≤–¥–∞–Ω–Ω—è 4.6
–Ø–∫—â–æ realloc(3) –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑ NULL –∞–±–æ —Ä–æ–∑–º—ñ—Ä–æ–º 0, —â–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è? –ù–∞–ø–∏—à—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫.
–ó–∞–≤–¥–∞–Ω–Ω—è 4.7
–ü–µ—Ä–µ–ø–∏—à—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ reallocarray(3):
struct sbar *ptr, *newptr;
ptr = calloc(1000, sizeof(struct sbar));
newptr = realloc(ptr, 500*sizeof(struct sbar));


–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º ltrace.
–ó–∞–≤–¥–∞–Ω–Ω—è –ø–æ –í–ê–†–Ü–ê–ù–¢–ê–•


1. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π malloc/free –Ω–∞ –±–∞–∑—ñ brk() –¥–ª—è –º–∞–ª–∏—Ö –±–ª–æ–∫—ñ–≤ —ñ mmap() –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö. –ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ —Ä–æ–∑–±–∏—Ç—Ç—è —Ç–∞ –æ–±‚Äô—î–¥–Ω–∞–Ω–Ω—è –≤—ñ–ª—å–Ω–∏—Ö –±–ª–æ–∫—ñ–≤. –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–ø–ª–∏–≤ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü—ñ—ó.
2. –ù–∞–ø–∏—Å–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É –∑ –ø–æ—Å—Ç—É–ø–æ–≤–∏–º –≤–∏—Ç–æ–∫–æ–º –ø–∞–º‚Äô—è—Ç—ñ. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –π–æ–≥–æ —á–µ—Ä–µ–∑ Valgrind, /proc/self/status —Ç–∞ –≤–ª–∞—Å–Ω–∏–π –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∞–ª–æ–∫–∞—Ü—ñ–π.
3. –î–æ—Å–ª—ñ–¥–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å malloc/free –ø—Ä–∏ 1, 2, 4, 8 –ø–æ—Ç–æ–∫–∞—Ö. –ó—Ä–æ–±–∏—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç —ñ–∑ thread-local –ø—É–ª–æ–º —ñ –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ —á–∞—Å.
4. –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫ —á–∞—Å—Ç–æ –ø—ñ—Å–ª—è free() malloc() –ø–æ–≤–µ—Ä—Ç–∞—î —Ç—É —Å–∞–º—É –∞–¥—Ä–µ—Å—É –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ –±–ª–æ–∫—ñ–≤.
5. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ mmap() —Ç–∞ mprotect() –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç–æ—Ä–æ–∂–æ–≤–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ —ñ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π segfault –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑–∞ –º–µ–∂—ñ –±—É—Ñ–µ—Ä–∞.
6. –í–∏–¥—ñ–ª–∏—Ç–∏ –≤–µ–ª–∏–∫–∏–π –æ–±—Å—è–≥ –ø–∞–º‚Äô—è—Ç—ñ, –≤–∏–º—ñ—Ä—è—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ VmSize —ñ VmRSS –¥–æ —Ç–∞ –ø—ñ—Å–ª—è –∑–∞–ø–∏—Å—É –≤ —Å—Ç–æ—Ä—ñ–Ω–∫–∏. –ü–æ—è—Å–Ω–∏—Ç–∏ lazy allocation.
7. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–µ—Å—Ç —ñ–∑ —Ä—ñ–∑–Ω–∏–º stride –¥–æ—Å—Ç—É–ø—É –¥–æ –º–∞—Å–∏–≤—É (1, 4, 16, 64, 4096 –±–∞–π—Ç) —ñ –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è. –ü–æ—è—Å–Ω–∏—Ç–∏ –≤–ø–ª–∏–≤ –∫–µ—à—É —Ç–∞ TLB.
8. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ calloc() —ñ malloc()+memset() –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –±–ª–æ–∫—ñ–≤, –≤–∏–º—ñ—Ä—è—Ç–∏ —á–∞—Å —Ç–∞ –ø–æ—è—Å–Ω–∏—Ç–∏ –≤–ø–ª–∏–≤ zero-page.
9. –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π memory pool –¥–ª—è –æ–±‚Äô—î–∫—Ç—ñ–≤ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å —ñ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º malloc.
10. –î–æ—Å–ª—ñ–¥–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É realloc() –ø—Ä–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—ñ –±–ª–æ–∫—É. –í–∏—è–≤–∏—Ç–∏ –≤–∏–ø–∞–¥–∫–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ ‚Äú—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–∞ –º—ñ—Å—Ü—ñ‚Äù.
11. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É, —â–æ –≤–∏–∫–ª–∏–∫–∞—î –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∏–π OOM —á–µ—Ä–µ–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è ulimit, —Ç–∞ –¥–æ—Å–ª—ñ–¥–∏—Ç–∏ —Ä–µ–∞–∫—Ü—ñ—é malloc.
12. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —è–∫ –∑–º—ñ–Ω—é—î—Ç—å—Å—è program break —á–µ—Ä–µ–∑ sbrk(0) –ø—ñ—Å–ª—è —Å–µ—Ä—ñ—ó –º–∞–ª–∏—Ö –∞–ª–æ–∫–∞—Ü—ñ–π.
13. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∞–ª–æ–∫–∞—Ü—ñ—é –≤–µ–ª–∏–∫–æ–≥–æ –±–ª–æ–∫—É (200 –ú–ë) —ñ –±–∞–≥–∞—Ç—å–æ—Ö –º–∞–ª–∏—Ö (200 000 √ó 1 –ö–ë) —á–µ—Ä–µ–∑ /proc/self/maps.
14. –î–æ—Å–ª—ñ–¥–∏—Ç–∏, —è–∫ fork() –≤–ø–ª–∏–≤–∞—î –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º‚Äô—è—Ç—ñ –ø—ñ—Å–ª—è –≤–µ–ª–∏–∫–æ—ó –∞–ª–æ–∫–∞—Ü—ñ—ó. –ü–æ–∫–∞–∑–∞—Ç–∏ –µ—Ñ–µ–∫—Ç Copy-On-Write.
15. –ü–µ—Ä–µ—Ö–æ–ø–∏—Ç–∏ malloc/free —á–µ—Ä–µ–∑ –æ–±–≥–æ—Ä—Ç–∫—É —Ç–∞ –≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª —É—Å—ñ—Ö –≤–∏–¥—ñ–ª–µ–Ω—å. –í–∏—è–≤–∏—Ç–∏ –Ω–µ–∑–≤—ñ–ª—å–Ω–µ–Ω—ñ –±–ª–æ–∫–∏.
16. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ü–µ–Ω–∞—Ä—ñ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü—ñ—ó: —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö —ñ –º–∞–ª–∏—Ö –∞–ª–æ–∫–∞—Ü—ñ–π, —á–∞—Å—Ç–∫–æ–≤–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏, —á–∏ –º–æ–∂–ª–∏–≤–∞ –∞–ª–æ–∫–∞—Ü—ñ—è –≤–µ–ª–∏–∫–æ–≥–æ —Å—É—Ü—ñ–ª—å–Ω–æ–≥–æ –±–ª–æ–∫—É.
17. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å aligned_alloc() —ñ malloc() –¥–ª—è –º–∞—Å–∏–≤—É —á–∏—Å–µ–ª —ñ–∑ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è–º —á–∞—Å—É –æ–±—á–∏—Å–ª–µ–Ω—å.
18. –î–æ—Å–ª—ñ–¥–∏—Ç–∏, —á–∏ –∑–∞–≤–∂–¥–∏ malloc(0) –ø–æ–≤–µ—Ä—Ç–∞—î NULL –∞–±–æ —É–Ω—ñ–∫–∞–ª—å–Ω—É –∞–¥—Ä–µ—Å—É, —ñ —á–∏ –±–µ–∑–ø–µ—á–Ω–æ —ó—ó –∑–≤—ñ–ª—å–Ω—è—Ç–∏.
19. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É –ø—ñ–¥ Valgrind —ñ–∑ –ø–æ–º–∏–ª–∫–æ—é use-after-free —Ç–∞ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç.
20. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É malloc —É –¥–≤–æ—Ö —Ä—ñ–∑–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è—Ö (glibc —Ç–∞ musl) –Ω–∞ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö —Ç–µ—Å—Ç–∞—Ö –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –π —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü—ñ—ó.
